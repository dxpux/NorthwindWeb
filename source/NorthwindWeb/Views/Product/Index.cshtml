@{
    ViewBag.Title = "產品管理";
}

<div id="productApp" class="panel panel-default">
    <div class="panel-heading">
        <h1>產品管理</h1>
    </div>
    <div class="panel-body">
        <div class="container-fluid">
            <div class="row">
                <div class="col-md-12">
                    <table class="table table-striped">
                        <thead>
                            <tr>
                                <th>商品名稱</th>
                                <th>庫存單位量</th>
                                <th>訂貨單位量</th>
                                <th>單位數量</th>
                                <th>單位價格</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr v-for="product in products">
                                <td>{{product.ProductName}}</td>
                                <td>{{product.UnitsInStock}}</td>
                                <td>{{product.UnitsOnOrder}}</td>
                                <td>{{product.QuantityPerUnit}}</td>
                                <td>{{product.UnitPrice}}</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>

@section scripts
{
    <script src="http://cdnjs.cloudflare.com/ajax/libs/vue/2.0.0-rc.1/vue.min.js"></script>
    <script>
        var vm = new Vue({
            el: '#productApp',
            data: {
                newTodo: '',
                todos: [
                  { text: 'Add some todos' }
                ],
                products: []
            },
            methods: {
                refreshProducts: function () {
                    $.ajax({
                        type: "POST",
                        url: '@Url.Action("JsonGetProducts", "Product")',
                        success: function (data) {
                            if (data.Success == true);
                            vm.products = data.Data;
                        }
                    })
                },
                addTodo: function () {
                    var text = this.newTodo.trim();

                    if (text) {
                        this.todos.push({ text: text });
                        this.newTodo = '';
                    }
                },
                removeTodo: function (index) {
                    this.todos.splice(index, 1);
                }
            }
        });

        vm.refreshProducts();
    </script>
}